<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>User Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      background-color: #f8f9fa;
    }
    .card {
      border: none;
      border-radius: 15px;
    }
    .stat-card {
      transition: 0.3s;
    }
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0px 6px 20px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary shadow">
  <div class="container-fluid">
    <a class="navbar-brand fw-bold" href="#">My Dashboard</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <button class="btn btn-warning ms-2" onclick="logout()">Logout</button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Dashboard Content -->
<div class="container mt-4">

  <!-- Welcome Section -->
  <div class="card shadow-sm p-4 mb-4">
    <h3>Welcome back, <span id="username" class="text-primary"></span> ðŸ‘‹</h3>
    <p class="text-muted mb-0">Hereâ€™s an overview of your account and recent activities.</p>
  </div>

  <!-- Stats Cards -->
  <div class="row g-4">
    <div class="col-md-3">
      <div class="card stat-card text-center p-3 bg-light shadow-sm">
        <h6 class="text-muted">Total Users</h6>
        <h2 class="fw-bold text-primary">128</h2>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card stat-card text-center p-3 bg-light shadow-sm">
        <h6 class="text-muted">Monthly Sales</h6>
        <h2 class="fw-bold text-success">â‚¹56,400</h2>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card stat-card text-center p-3 bg-light shadow-sm">
        <h6 class="text-muted">Projects</h6>
        <h2 class="fw-bold text-warning">12</h2>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card stat-card text-center p-3 bg-light shadow-sm">
        <h6 class="text-muted">Support Tickets</h6>
        <h2 class="fw-bold text-danger">5</h2>
      </div>
    </div>
  </div>

  <!-- Charts Section -->
  <div class="row mt-5">
    <div class="col-md-8">
      <div class="card shadow-sm p-4">
        <h5 class="mb-3">Monthly Sales Overview</h5>
        <canvas id="salesChart" height="150"></canvas>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card shadow-sm p-4">
        <h5 class="mb-3">Project Completion</h5>
        <canvas id="projectChart" height="150"></canvas>
      </div>
    </div>
  </div>

  <!-- Recent Activities Table -->
  <div class="card shadow-sm mt-5">
    <div class="card-header bg-white border-0">
      <h5 class="mb-0">Recent Activities</h5>
    </div>
    <div class="card-body">
      <table class="table table-striped align-middle">
        <thead class="table-primary">
          <tr>
            <th>#</th>
            <th>Activity</th>
            <th>Date</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1</td>
            <td>Updated Profile</td>
            <td>13 Nov 2025</td>
            <td><span class="badge bg-success">Completed</span></td>
          </tr>
          <tr>
            <td>2</td>
            <td>Uploaded Document</td>
            <td>12 Nov 2025</td>
            <td><span class="badge bg-info">In Review</span></td>
          </tr>
          <tr>
            <td>3</td>
            <td>Requested Support</td>
            <td>10 Nov 2025</td>
            <td><span class="badge bg-warning">Pending</span></td>
          </tr>
          <tr>
            <td>4</td>
            <td>Added Payment Method</td>
            <td>8 Nov 2025</td>
            <td><span class="badge bg-success">Completed</span></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Progress Section -->
  <div class="card shadow-sm mt-5 p-4">
    <h5 class="mb-3">Project Progress</h5>
    <p class="mb-1 fw-semibold">Website Redesign <span class="float-end text-muted">70%</span></p>
    <div class="progress mb-3">
      <div class="progress-bar bg-primary" style="width:70%"></div>
    </div>

    <p class="mb-1 fw-semibold">Mobile App Launch <span class="float-end text-muted">45%</span></p>
    <div class="progress mb-3">
      <div class="progress-bar bg-success" style="width:45%"></div>
    </div>

    <p class="mb-1 fw-semibold">Marketing Campaign <span class="float-end text-muted">85%</span></p>
    <div class="progress">
      <div class="progress-bar bg-warning" style="width:85%"></div>
    </div>
  </div>

</div>

<!-- JS Logic -->
<script>
function checkLogin() {
  const isLoggedIn = localStorage.getItem("isLoggedIn");
  const user = JSON.parse(localStorage.getItem("user"));

  if (!isLoggedIn || !user) {
    alert("Please login first!");
    window.location.href = "login.html";
    return;
  }

  document.getElementById("username").textContent = user.name;
}

function logout() {
  localStorage.removeItem("isLoggedIn");
  alert("Logged out successfully!");
  window.location.href = "login.html";
}

// Chart.js: Monthly Sales Bar Chart
function renderCharts() {
  const ctx1 = document.getElementById('salesChart').getContext('2d');
  new Chart(ctx1, {
    type: 'bar',
    data: {
      labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
      datasets: [{
        label: 'Monthly Sales (â‚¹)',
        data: [12000, 15000, 18000, 22000, 20000, 25000, 27000, 30000, 32000, 28000, 35000, 40000],
        backgroundColor: 'rgba(54, 162, 235, 0.6)',
        borderColor: '#007bff',
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: { beginAtZero: true }
      }
    }
  });

  // Chart.js: Project Completion Pie Chart
  const ctx2 = document.getElementById('projectChart').getContext('2d');
  new Chart(ctx2, {
    type: 'pie',
    data: {
      labels: ['Completed', 'In Progress', 'Pending'],
      datasets: [{
        data: [60, 25, 15],
        backgroundColor: ['#28a745', '#ffc107', '#dc3545'],
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'bottom' }
      }
    }
  });
}

checkLogin();
renderCharts();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
